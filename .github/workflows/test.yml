name: tests
on: [push]
jobs:
  bootstrap:
    runs-on: macos-latest
    steps:
    - uses: actions/checkout@v1
    - name: Link to home
      run: ln -s "$PWD" "$HOME/.dotfiles"
    - name: Move existing /usr/local/bin
      run: |-
        dest="/usr/local/gh-bin"
        mkdir "$dest"
        sudo mv /usr/local/bin/* "$dest"
        echo "$dest" >> $GITHUB_PATH
    - name: Bootstrap
      run: ./scripts/bootstrap
  shellcheck:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
      - uses: ludeeus/action-shellcheck@1.0.0
        env:
          SHELLCHECK_OPTS: -e SC1071
